class s{constructor(){this.prefix="pentagram-"}store(e,t){try{const r=this.prefix+e,o=JSON.stringify(t);return localStorage.setItem(r,o),!0}catch(r){return console.error(`Failed to store ${e}:`,r),!1}}retrieve(e){try{const t=this.prefix+e,r=localStorage.getItem(t);return r===null?null:JSON.parse(r)}catch(t){return console.error(`Failed to retrieve ${e}:`,t),null}}remove(e){try{const t=this.prefix+e;return localStorage.removeItem(t),!0}catch(t){return console.error(`Failed to remove ${e}:`,t),!1}}clearAll(){try{const e=[];for(let t=0;t<localStorage.length;t++){const r=localStorage.key(t);r&&r.startsWith(this.prefix)&&e.push(r)}return e.forEach(t=>localStorage.removeItem(t)),console.log(`Cleared ${e.length} storage items`),!0}catch(e){return console.error("Failed to clear storage:",e),!1}}getStorageInfo(){try{let e=0,t=0;for(let r=0;r<localStorage.length;r++){const o=localStorage.key(r);if(o&&o.startsWith(this.prefix)){const a=localStorage.getItem(o);e+=o.length+(a?a.length:0),t++}}return{itemCount:t,totalSize:e,approximateSizeKB:Math.round(e/1024*100)/100}}catch(e){return console.error("Failed to get storage info:",e),{itemCount:0,totalSize:0,approximateSizeKB:0}}}isAvailable(){try{const e=this.prefix+"test";return localStorage.setItem(e,"test"),localStorage.removeItem(e),!0}catch(e){return console.warn("localStorage not available:",e),!1}}exportData(){try{const e={};for(let t=0;t<localStorage.length;t++){const r=localStorage.key(t);if(r&&r.startsWith(this.prefix)){const o=localStorage.getItem(r);e[r]=o}}return{data:e,exported:Date.now(),version:"1.0"}}catch(e){throw console.error("Failed to export data:",e),new Error("Data export failed")}}importData(e){if(!e||!e.data)throw new Error("Invalid backup data");try{let t=0;return Object.entries(e.data).forEach(([r,o])=>{r.startsWith(this.prefix)&&(localStorage.setItem(r,o),t++)}),console.log(`Imported ${t} storage items`),t}catch(t){throw console.error("Failed to import data:",t),new Error("Data import failed")}}}export{s as StorageManager};
